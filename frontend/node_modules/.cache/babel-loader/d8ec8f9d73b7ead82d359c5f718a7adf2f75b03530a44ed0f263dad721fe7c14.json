{"ast":null,"code":"import React,{useEffect,useState}from\"react\";import{useAuthContext}from'../hooks/useAuthContext';import UsersDetails from'../components/UsersDetails';import{jsx as _jsx}from\"react/jsx-runtime\";const Main=()=>{const{user,dispatch}=useAuthContext();const[users,setUsers]=useState(null);useEffect(()=>{const fetchData=async()=>{try{const response=await fetch('http://localhost:4000/api/user',{method:'GET',headers:{'Authorization':\"Bearer \".concat(user.token)}});const data=await response.json();const foundUser=data.find(u=>u.email===user.email);if(!foundUser||foundUser.blocked===true){dispatch({type:'LOGOUT'});localStorage.removeItem('user');}setUsers(data);}catch(error){console.error('Error fetching user data',error);}};fetchData();},[user,dispatch]);// Include 'dispatch' in the dependency array\nreturn/*#__PURE__*/_jsx(\"div\",{className:\"flex justify-center pt-20 h-screen \\r bg-gradient-to-r from-blue-700 via-orange-600 to-yellow-500\",children:users&&/*#__PURE__*/_jsx(UsersDetails,{users:users})});};export default Main;","map":{"version":3,"names":["React","useEffect","useState","useAuthContext","UsersDetails","jsx","_jsx","Main","user","dispatch","users","setUsers","fetchData","response","fetch","method","headers","concat","token","data","json","foundUser","find","u","email","blocked","type","localStorage","removeItem","error","console","className","children"],"sources":["C:/Users/unili/Desktop/Task 4/frontend/src/pages/Main.js"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport { useAuthContext } from '../hooks/useAuthContext';\r\nimport UsersDetails from '../components/UsersDetails';\r\n\r\nconst Main = () => {\r\n    const { user, dispatch } = useAuthContext();\r\n    const [users, setUsers] = useState(null);\r\n\r\n    useEffect(() => {\r\n        const fetchData = async () => {\r\n            try {\r\n                const response = await fetch('http://localhost:4000/api/user', {\r\n                    method: 'GET',\r\n                    headers: { 'Authorization': `Bearer ${user.token}` }\r\n                });\r\n                const data = await response.json();\r\n                const foundUser = data.find(u => u.email === user.email);\r\n                if (!foundUser || foundUser.blocked === true) {\r\n                    dispatch({ type: 'LOGOUT' });\r\n                    localStorage.removeItem('user');\r\n                }\r\n                setUsers(data);\r\n            } catch (error) {\r\n                console.error('Error fetching user data', error);\r\n            }\r\n        };\r\n        fetchData();\r\n    }, [user, dispatch]); // Include 'dispatch' in the dependency array\r\n\r\n    return (\r\n        <div className='flex justify-center pt-20 h-screen \r\n        bg-gradient-to-r from-blue-700 via-orange-600 to-yellow-500'>\r\n            {users && <UsersDetails users={users} />}\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default Main;\r\n\r\n\r\n\r\n"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,SAAS,CAAEC,QAAQ,KAAQ,OAAO,CAClD,OAASC,cAAc,KAAQ,yBAAyB,CACxD,MAAO,CAAAC,YAAY,KAAM,4BAA4B,CAAC,OAAAC,GAAA,IAAAC,IAAA,yBAEtD,KAAM,CAAAC,IAAI,CAAGA,CAAA,GAAM,CACf,KAAM,CAAEC,IAAI,CAAEC,QAAS,CAAC,CAAGN,cAAc,CAAC,CAAC,CAC3C,KAAM,CAACO,KAAK,CAAEC,QAAQ,CAAC,CAAGT,QAAQ,CAAC,IAAI,CAAC,CAExCD,SAAS,CAAC,IAAM,CACZ,KAAM,CAAAW,SAAS,CAAG,KAAAA,CAAA,GAAY,CAC1B,GAAI,CACA,KAAM,CAAAC,QAAQ,CAAG,KAAM,CAAAC,KAAK,CAAC,gCAAgC,CAAE,CAC3DC,MAAM,CAAE,KAAK,CACbC,OAAO,CAAE,CAAE,eAAe,WAAAC,MAAA,CAAYT,IAAI,CAACU,KAAK,CAAG,CACvD,CAAC,CAAC,CACF,KAAM,CAAAC,IAAI,CAAG,KAAM,CAAAN,QAAQ,CAACO,IAAI,CAAC,CAAC,CAClC,KAAM,CAAAC,SAAS,CAAGF,IAAI,CAACG,IAAI,CAACC,CAAC,EAAIA,CAAC,CAACC,KAAK,GAAKhB,IAAI,CAACgB,KAAK,CAAC,CACxD,GAAI,CAACH,SAAS,EAAIA,SAAS,CAACI,OAAO,GAAK,IAAI,CAAE,CAC1ChB,QAAQ,CAAC,CAAEiB,IAAI,CAAE,QAAS,CAAC,CAAC,CAC5BC,YAAY,CAACC,UAAU,CAAC,MAAM,CAAC,CACnC,CACAjB,QAAQ,CAACQ,IAAI,CAAC,CAClB,CAAE,MAAOU,KAAK,CAAE,CACZC,OAAO,CAACD,KAAK,CAAC,0BAA0B,CAAEA,KAAK,CAAC,CACpD,CACJ,CAAC,CACDjB,SAAS,CAAC,CAAC,CACf,CAAC,CAAE,CAACJ,IAAI,CAAEC,QAAQ,CAAC,CAAC,CAAE;AAEtB,mBACIH,IAAA,QAAKyB,SAAS,CAAC,mGAC6C,CAAAC,QAAA,CACvDtB,KAAK,eAAIJ,IAAA,CAACF,YAAY,EAACM,KAAK,CAAEA,KAAM,CAAE,CAAC,CACvC,CAAC,CAEd,CAAC,CAED,cAAe,CAAAH,IAAI"},"metadata":{},"sourceType":"module","externalDependencies":[]}